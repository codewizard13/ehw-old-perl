#!/usr/bin/perl
#
# Program:    eh_testSortAndMoveFunc_051506_01.pl
# Creator:    Eric Hepperle
# Date:       05/15/06
#
# Purpose:    Since I was having trouble getting my
#             "sort_and_move_files" function/subroutine
#             to work properly, I created this program
#             to test and revise said subroutine.
#
# Requires:   * Source dir must exist as defined or you
#             must create it for program to work.
#
#             * Destination dir must exist.
#
#             * Test files must exist or you can create
#             text files and rename accordingly.
#
#             * Subdirs "audio", "video", "pix", & "docs"
#             must exist in the destination dir.
#
############################################################

# DEFINE TEST VARIABLES:
$source_dir = "F:/sortAndMoveSource";
$dest_dir = "F:/sortAndMoveDest";
$file1 = "$source_dir/fuck.you.and.your.mother.too.avi";
$file2 = "$source_dir/how is the weather in france!!.txt";
$file3 = "$source_dir/eat pussy all night 000456 - 01.45678.zip";
$file4 = "$source_dir/Jive Turkeyz - pump, pump, pump it up!! ft. lil' swift.mp3";

# store file paths in array for easier processing
@files = ($file1, $file2, $file3, $file4);

# test subroutine:
&sort_and_move_files(@files);

$pause = <STDIN>;


##########################
###### SUBROUTINES: ######
##########################

# sort and move files by extension
sub sort_and_move_files {

   # Arguments passed should be files to process;
   #    store them in an array.
   my (@files) = @_;

   print "\n\n";
   
   foreach $file (@files) {
      
	  # get this file's extension.
	  $file_ext = &get_ext($file);
	  #
	  # TRACING: Display variable values
	  print "\tFilename: $file\n"
	  print "\tExtension: $file_ext\n\n";
      
      if ($file_ext = "avi") {
         print "Moving $file from [$source_folder/$file] to  [$dest_dir/video/$file] ...\n\n";
         move("$source_folder/$file", "$dest_dir/video/$file");
      }
      if ($file_ext = "jpg") {
         print "Moving $file from [$source_folder/$file] to  [$dest_dir/pix/$file] ...\n\n";
         move("$source_folder/$file", "$dest_dir/pix/$file");
      }
      if ($file_ext = "txt") {
         print "Moving $file from [$source_folder/$file] to  [$dest_dir/docs/$file] ...\n\n";
         move("$source_folder/$file", "$dest_dir/docs/$file");
      }
      if ($file_ext = "mp3") {
         print "Moving $file from [$source_folder/$file] to  [$dest_dir/audio/$file] ...\n\n";
         move("$source_folder/$file", "$dest_dir/audio/$file");
      }
      
      # reset file extension
      $file_ext = "";
 
   }
}